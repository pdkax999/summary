
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
/* 
通过##task 进行分割,对数组进行过滤得到当期日志的日期列表,
利用search方法不断去查询起始下标和结束下标，用于分割字符串得到rethink下的字符串
*/ 

let summaryStr = "# task\n本阶段实际完成`xx`个番茄，本阶段预计完成``**<font style=\"color:#000000;\">个番茄</font>**\n\n<details class=\"lake-collapse\"><summary id=\"u6a34c4d4\"><span class=\"ne-text\">task</span></summary><p id=\"uede83829\" class=\"ne-p\"><strong><span class=\"ne-text\">求职</span></strong></p><ol class=\"ne-ol\"><li id=\"ua8e2a68c\" data-lake-index-type=\"0\"><span class=\"ne-text\">面试第二版简历</span><strong><span class=\"ne-text\">刷题</span></strong><span class=\"ne-text\"> （</span><code class=\"ne-code\"><span class=\"ne-text\">record</span></code><span class=\"ne-text\">）这里的点主要集中在我记录的题目</span></li></ol><p id=\"u2f03d8fe\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u605ecc82\" class=\"ne-p\"><strong><span class=\"ne-text\">WEBAPI</span></strong></p><ol class=\"ne-ol\"><li id=\"u449544ad\" data-lake-index-type=\"0\"><span class=\"ne-text\">canvas网道  进行中</span></li></ol><p id=\"u9b523393\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u356b5299\" class=\"ne-p\"><strong><span class=\"ne-text\">Vue3</span></strong></p><ol class=\"ne-ol\"><li id=\"uf4428c6e\" data-lake-index-type=\"0\"><code class=\"ne-code\"><span class=\"ne-text\">vue-tomato3</span></code><span class=\"ne-text\"> 博客以及自己汇总的项目文件需要处理</span></li></ol><p id=\"u7220999d\" class=\"ne-p\"><br></p></details>\n\n\n# 完成情况\n\n\n![](https://cdn.nlark.com/yuque/__mermaid_v3/b601b680435dd26c24bd3904237919eb.svg)\n\n# rethink\n### 任务管理(<font style=\"color:#DF2A3F;\">日益激烈的社会</font>)\n从八月份开始忙了很多事情 `shell`，`<font style=\"color:#DF2A3F;\">TS</font>` **鸿蒙  Vue2知识梳理，类型体操刷题，单词每日记忆计划，**就拿现在来说很难去 **坚持，可持续做一件事情。数学，这让我的时间****<font style=\"color:#DF2A3F;\">利用率尤其的</font>**<font style=\"color:#DF2A3F;\">低下</font>。\n\n可能性\n\n1. 执行完毕之后，后续就不回顾了\n2. 执行到某个阶段，就放弃了。\n3. 或者说想好怎么执行，后续都忘记了，\n\n坚持，可持续性，\n\n我需要一个任务管理体系，能够**最大化的提升学习的效率**。曾经想过怎么搭建就是第二种可能性，哈哈哈🤣（比前面执行的好一些了至少现在还记得`ts`）   **短时间内根本就搭建不起来，至少需要不断实践**`**6**`**月**\n\n:::color3\n焦虑 恐惧 \n\n娱乐 欲望\n\n浮躁 他人的眼光\n\n难度太大了\n\n:::\n\n\n\n1. 随时知道自己在做什么！ 任务可以快捷统计\n2. 可以有序有质量的推进手上任务的进度，并成功完成\n3. 遗忘率很低，\n\n\n\n分为 `7`个阶段，每个阶段`4`天，最后一个阶段用来对整个月进行复习。   \n\n\n\n每个阶段分为`3`天()，第`3`天用来回顾本阶段。\n\n一个周有两个阶段，最后一天用来回顾两个阶段。\n\n我一共可以经历`4`大阶段， 最后`3`天或者`2`天用来回顾这一整个月\n\n暂时就这么执行\n\n\n\n1. 月复\n\n我现在没办法也没时间去想计划，就简单来做逐步完善这个体系。\n\n1. 回顾下自己是\n\n\n\n\n\n# idea\n\n\n# 行为改进\n"

let stageSummary = [];

// 正则表达式匹配一级标题日期
const matchRegex = {
    matchTime:/^#\s\d{4}年\d{1,2}月.*?日/gm,  //提取时间
}

// 提取总结下所有日期列表
const dates = summaryStr.match(matchRegex.matchTime);

let results = sliceRethinks(summaryStr)
console.log(results,"----",dates);

stageSummary = stageSummary.concat(...todaySummaryGroup(item,dates[index]))

console.log('----stage',stageSummary);

/* results.forEach((item,index)=>{
    stageSummary = stageSummary.concat(...todaySummaryGroup(item,dates[index]))
})

console.log(stageSummary);

console.log({a:mergeSummary(generateGroup(stageSummary))}); */

// 合并字符串
function mergeSummary(groupObj){
    let summary = ""

    Object.keys(groupObj).forEach((key)=>{

        let sayCate = ""

        sayCate = groupObj[key].map((item)=>`#${item.time}${item.content}`).join("")

        summary+=`# ${key}
        \n
        ${sayCate}
        `; //设置上key
    })
    return summary
}

// 截取反思字符串
function sliceRethinks(str){

    let results = [];

    let sourceStr = str;
    
    let startStr = "\n# rethink";

    let endStr = "\n# idea";

    while (sourceStr.search(startStr)!==-1) {
        
        let startIndex = sourceStr.search(startStr);

        let endIndex = sourceStr.search(endStr);

        let rethinks =  sourceStr.slice(startIndex,endIndex);

        results.push(rethinks);

        sourceStr = sourceStr.slice(endIndex+endStr.length)        
    }
    
    return  results;
}

// 字符串数组
function todaySummaryGroup(str,time){
    let startStr = "\n# rethink";

    const results = [];

    let source = str.replace(startStr,"")
    
    return source.split("###").filter((item)=>  item!=="\n" && item).map((item)=>({
        group:item.slice(0,item.indexOf("\n")).trim(),
        content:item.slice(item.indexOf("\n")),
        time
    }))
}

// 对数据进行分组
function generateGroup(cates){

   return cates.reduce((pre,item)=>{
        
        if(pre[item.group]){
           pre[item.group].push(item)
        }else{
            pre[item.group]= [item]
        }
        return pre;
    },{})
} 
/* 
1. 还差一个排序暂时放着
2. 阶段终结的标题 要比日总结大一级别
*/


</script>
</body>
</html>